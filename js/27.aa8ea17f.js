(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{6403:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"row q-col-gutter-sm q-ma-xs q-mr-sm"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",[a("q-table",{attrs:{title:"รายละเอียดใบจ่าย",data:t.allpaymenttables,flat:"",columns:t.columnspaymenttable,"row-key":"Paymentid",pagination:t.pagination,loading:t.loadgingpaymenttables},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"refresh"},on:{click:function(e){t.filter="",t.Search()}}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}]},[t._v("รีโหลด")])],1),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"},on:{click:function(e){t.showdialogadd=!0}}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}]},[t._v("เพิ่ม")])],1),a("q-input",{attrs:{outlined:"",dense:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Search()}},scopedSlots:t._u([{key:"apped",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("q-tooltip",[t._v("รหัส/ชื่อ Enter")])],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{attrs:{size:"md",outline:"",dense:"",icon:"print",color:"blue-grey-6"},on:{click:function(a){return t.labelPrint(e.row)}}},[a("q-tooltip",[t._v("พิมพ์")])],1)],1),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{staticClass:"q-ml-xs",attrs:{size:"sm",color:"blue-grey-6",round:"",outline:"",dense:"",icon:e.expand?"remove":"add"},on:{click:function(t){e.expand=!e.expand}}})],1),a("q-td",{staticClass:"bg-grey-2 ellipsis",attrs:{"auto-width":""}},[t._v("\n                  "+t._s(e.row.Paymentid)+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(t.date.formatDate(new Date(e.row.Paydate),"DD/MM/YY"))+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(t.date.formatDate(new Date(e.row.Paydatetime),"HH:mm"))+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(e.row.Paymenttypename)+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(e.row.Refagentname)+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(e.row.Textid)+"\n                ")]),a("q-td",{staticClass:"bg-grey-2 ellipsis text-right",attrs:{"auto-width":""}},[a("q-badge",{attrs:{color:"indigo-8"}},[t._v("\n                    "+t._s(e.row.Paymentline.map((function(t){return t.Lineamount})).reduce((function(t,e){return t+e}),0).toFixed(2))+"\n                  ")])],1),a("q-td",{staticClass:"bg-grey-2 ellipsis",attrs:{"auto-width":""}},[t._v("\n                  "+t._s(t.alluser.find((function(t){return t.Id===e.row.Createdby}))?t.alluser.find((function(t){return t.Id===e.row.Createdby})).UserName:"")+"\n                ")]),a("q-td",{attrs:{"auto-width":""}},[t._v("\n                  "+t._s(e.row.Remark)+"\n                ")])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"row"},t._l(e.row.Paymentline,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.Linenum,staticClass:"col-md-7 offset-2",attrs:{dense:"",clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"primary","text-color":"white",size:"sm"}},[t._v("\n                          "+t._s(e.Linenum)+"\n                        ")])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.Refgroupshopid))])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.Refitemname))])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.Refratename))])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.Reteqty.toFixed(2))+" x "+t._s(e.Reteamount.toFixed(2)))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[a("q-badge",{attrs:{color:"secondary"}},[t._v("\n                            "+t._s(e.Lineamount.toFixed(2))+"\n                          ")])],1)],1)],1)})),1)])],1)]}},{key:"pagination",fn:function(){return[a("div",[a("q-pagination",{attrs:{size:"sm",color:"black",max:t.pagination.MaxPage,"max-pages":4,"boundary-numbers":!1},model:{value:t.pagination.Page,callback:function(e){t.$set(t.pagination,"Page",e)},expression:"pagination.Page"}})],1)]},proxy:!0}])})],1)],1)],1)]),a("q-dialog",{model:{value:t.showdialogprint,callback:function(e){t.showdialogprint=e},expression:"showdialogprint"}},[a("div",{staticStyle:{"max-width":"100%",width:"80%"}},[a("printpayment",{attrs:{itemtoprint:t.itemtoprint}})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:t.showdialogadd,callback:function(e){t.showdialogadd=e},expression:"showdialogadd"}},[a("div",{staticStyle:{"max-width":"100%",width:"80%"}},[a("addpayment",{attrs:{defaultagentid:""},on:{added:t.Added}})],1)])],1)},i=[],o=(a("456d"),a("8a81"),a("9986"),a("8e6e"),a("448a")),r=a.n(o),s=a("9523"),l=a.n(s),d=(a("d25f"),a("6d67"),a("f751"),a("bd4c")),c=a("2f62");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"Agenttable",components:{addpayment:a("c068").default,printpayment:a("4a21").default},data:function(){return{date:d["b"],pagination:{Page:1,MaxPage:1,page:1,rowsPerPage:10},filter:"",allpaymenttables:[],columnspaymenttable:[{name:"Print",label:"",align:"center",field:"Print"},{name:"Action",label:"",align:"center",field:"Action"},{name:"Paymentid",label:"เลขที่",align:"left",field:"Paymentid",sortable:!0,headerClasses:"bg-primary text-white",classes:"bg-grey-2 ellipsis"},{name:"Paydate",label:"วันที่",align:"left",field:"Paydate",format:function(t){return d["b"].formatDate(new Date(t),"DD/MM/YY")},sortable:!0},{name:"Paydatetime",label:"เวลา",align:"left",field:"Paydatetime",format:function(t){return d["b"].formatDate(new Date(t),"HH:mm")},sortable:!0},{name:"Paymenttypename",label:"ประเภท",align:"left",field:"Paymenttypename",sortable:!0},{name:"Refagentname",label:"ชื่อ",align:"left",field:"Refagentname",sortable:!0},{name:"Textid",label:"เลขที่ภาษี",align:"left",field:"Textid",sortable:!0},{name:"Sumamount",label:"ยอดจ่ายรวม",align:"right",field:"Sumamount",sortable:!0,headerClasses:"bg-primary text-white",classes:"bg-grey-2 ellipsis"},{name:"Createdby",label:"ทำจ่าย",align:"left",field:"Createdby",sortable:!0,headerClasses:"bg-primary text-white",classes:"bg-grey-2 ellipsis"},{name:"Remark",label:"หมายเหตุ",align:"center",field:"Remark",sortable:!0}],alluser:[],itemtoprint:null,showdialogprint:!1,showdialogadd:!1}},created:function(){this.LoadData(this.pagination)},methods:m(m(m({},Object(c["b"])("retailarea",["getpaymenttablespagination"])),Object(c["b"])("auth",["getuserinid"])),{},{LoadData:function(t){var e=this;this.loadgingpaymenttables=!0,this.getpaymenttablespagination({page:t.Page,rowperpage:t.rowsPerPage,search:this.filter}).then((function(t){var a=t.data;return e.pagination.MaxPage=a.MaxPage,e.allpaymenttables=a.Data,[].concat(r()(e.allpaymenttables.map((function(t){return t.Createdby}))),r()(e.allpaymenttables.map((function(t){return t.Modifiedby}))))})).then((function(t){return e.getuserinid({data:t})})).then((function(t){t.status;var a=t.data;e.alluser=a,e.loadgingpaymenttables=!1})).catch((function(t){e.$q.notify(t.message),e.loadgingpaymenttables=!1}))},Search:function(){1===this.pagination.Page?this.LoadData(this.pagination):this.pagination.Page=1},labelPrint:function(t){var e=this;e.itemtoprint=Object.assign({},t),e.showdialogprint=!0},Added:function(t){this.allpaymenttables.unshift(t),this.showdialogadd=!1}}),beforeDestroy:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.$q.loading.hide())},watch:{"pagination.Page":function(t,e){this.LoadData(this.pagination)},"pagination.rowsPerPage":function(){1===this.pagination.Page?this.LoadData(this.pagination):this.pagination.Page=1}}},g=u,f=a("2877"),b=a("9989"),y=a("f09f"),h=a("a370"),w=a("eaac"),v=a("9c40"),q=a("05c0"),P=a("27f9"),_=a("0016"),x=a("bd08"),k=a("db86"),D=a("58a8"),O=a("66e5"),C=a("4074"),Q=a("cb32"),j=a("0170"),S=a("3b16"),R=a("24e8"),L=a("7f67"),M=a("714f"),T=a("eebe"),I=a.n(T),A=Object(f["a"])(g,n,i,!1,null,null,null);e["default"]=A.exports;I()(A,"components",{QPage:b["a"],QCard:y["a"],QCardSection:h["a"],QTable:w["a"],QBtn:v["a"],QTooltip:q["a"],QInput:P["a"],QIcon:_["a"],QTr:x["a"],QTd:k["a"],QBadge:D["a"],QItem:O["a"],QItemSection:C["a"],QAvatar:Q["a"],QItemLabel:j["a"],QPagination:S["a"],QDialog:R["a"]}),I()(A,"directives",{ClosePopup:L["a"],Ripple:M["a"]})}}]);