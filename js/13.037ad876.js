(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{ce51:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row q-col-gutter-sm q-ma-xs q-mr-sm"},[n("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},[n("q-card",{attrs:{flat:"",bordered:""}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("เพิ่ม/แก้ไข")])]),n("q-separator",{attrs:{inset:""}}),n("q-card-section",[n("q-list",[n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"q-pb-xs"},[e._v("รหัสพนักงาน")]),n("q-input",{attrs:{dense:"",outlined:"",readonly:!e.modeadd,label:"รหัสพนักงาน"},on:{keypress:function(e){return 65<=e.which&&e.which<=90||e.which>=48&&e.which<=57||e.preventDefault()}},model:{value:e.currentempltable.Emplid,callback:function(t){e.$set(e.currentempltable,"Emplid",t)},expression:"currentempltable.Emplid"}})],1)],1),n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"q-pb-xs"},[e._v("ชื่อ")]),n("q-input",{attrs:{dense:"",outlined:"",label:"ชื่อ"},model:{value:e.currentempltable.Name,callback:function(t){e.$set(e.currentempltable,"Name",t)},expression:"currentempltable.Name"}})],1)],1),n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"q-pb-xs"},[e._v("เลขที่ ปชช.")]),n("q-input",{attrs:{dense:"",outlined:"",label:"เลขที่ ปชช"},model:{value:e.currentempltable.Identnumber,callback:function(t){e.$set(e.currentempltable,"Identnumber",t)},expression:"currentempltable.Identnumber"}})],1)],1),n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"q-pb-xs"},[e._v("แผนก")]),n("q-select",{attrs:{dense:"",outlined:"",label:"กลุ่มงาน",options:e.alldimensions,"option-label":"Description","option-value":"Num","emit-value":"","map-options":"",behavior:"menu"},model:{value:e.currentempltable.Dimension,callback:function(t){e.$set(e.currentempltable,"Dimension",t)},expression:"currentempltable.Dimension"}})],1)],1),n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"q-pb-xs"},[e._v("รหัสผู้ใช้ Login")]),n("q-select",{attrs:{dense:"",outlined:"",label:"ผู้ใช้ Login",options:e.alluser,"option-label":"UserName","option-value":"Id","emit-value":"","map-options":"","use-input":"","hide-selected":"","fill-input":""},on:{"update:options":function(t){e.alluser=t},filter:e.filterFn,"filter-abort":function(){}},scopedSlots:e._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[e._v("\n                        ไม่พบผู้ใช้\n                      ")])],1)]},proxy:!0}]),model:{value:e.currentempltable.Userid,callback:function(t){e.$set(e.currentempltable,"Userid",t)},expression:"currentempltable.Userid"}})],1)],1)],1)],1),n("q-card-actions",{staticClass:"q-mr-md",attrs:{align:"right"}},[e.modeadd?n("q-btn",{staticClass:"q-pl-md q-pr-md",attrs:{outline:"",label:"เพิ่ม",color:"primary",disable:!e.currentempltable.Emplid||!e.currentempltable.Name||!e.currentempltable.Dimension||!e.currentempltable.Identnumber},on:{click:function(t){return e.Createempltables(e.currentempltable)}}}):n("q-btn",{staticClass:"q-pl-md q-pr-md",attrs:{outline:"",label:"อัพเดท",color:"primary",disable:!e.currentempltable.Emplid||!e.currentempltable.Name||!e.currentempltable.Dimension||!e.currentempltable.Identnumber},on:{click:function(t){return e.Updateempltables(e.currentempltable)}}})],1)],1)],1),n("div",{staticClass:"col-lg-8 col-md-8 col-sm-12 col-xs-12"},[n("q-card",{attrs:{flat:"",bordered:""}},[n("q-card-section",[n("q-table",{attrs:{title:"พนักงาน",data:e.allempltable,flat:"","hide-header":"grid"===e.mode,columns:e.columnsempltable,selection:"single",selected:e.selected,"row-key":"Emplid",filter:e.filter,grid:"grid"==e.mode,pagination:e.pagination},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top-right",fn:function(t){return[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"refresh"},on:{click:function(t){e.filter="",e.Search()}}},[n("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}]},[e._v("รีโหลด")])],1),n("q-input",{attrs:{borderless:"",dense:"",placeholder:"Search"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Search()}},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),t.inFullscreen?e._e():n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"grid"===e.mode?"list":"grid_on"},on:{click:function(t){e.mode="grid"===e.mode?"list":"grid",e.separator="grid"===e.mode?"none":"horizontal"}}},[n("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:e.$q.platform.is.mobile}},[e._v(e._s("grid"===e.mode?"List":"Grid"))])],1)]}},{key:"body-cell-Dimension",fn:function(t){return[n("q-td",{attrs:{props:t}},[e._v("\n                "+e._s(e.alldimensions.find((function(e){return e.Num===t.row.Dimension}))?e.alldimensions.find((function(e){return e.Num===t.row.Dimension})).Description:"")+"\n              ")])]}},{key:"body-cell-Userid",fn:function(t){return[n("q-td",{attrs:{props:t}},[e._v("\n                "+e._s(e.optionempltable.find((function(e){return e.Id===t.row.Userid}))?e.optionempltable.find((function(e){return e.Id===t.row.Userid})).UserName:"")+"\n              ")])]}},{key:"body-cell-Modifiedby",fn:function(t){return[n("q-td",{attrs:{props:t}},[e._v("\n                "+e._s(e.optionempltable.find((function(e){return e.Id===t.row.Modifiedby}))?e.optionempltable.find((function(e){return e.Id===t.row.Modifiedby})).UserName:"")+"\n              ")])]}},{key:"pagination",fn:function(){return[n("div",[n("q-pagination",{attrs:{size:"sm",color:"black",max:e.pagination.MaxPage,"max-pages":4,"boundary-numbers":!1},model:{value:e.pagination.Page,callback:function(t){e.$set(e.pagination,"Page",t)},expression:"pagination.Page"}})],1)]},proxy:!0}])})],1)],1)],1)])])},a=[],l=(n("456d"),n("8a81"),n("9986"),n("8e6e"),n("448a")),o=n.n(l),r=n("9523"),s=n.n(r),d=(n("d25f"),n("6d67"),n("bd4c")),c=n("2f62");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"Dimensions",data:function(){return{modeadd:!0,mode:"list",pagination:{Page:1,MaxPage:1,page:1,rowsPerPage:10},filter:"",alldimensions:[],selected:[],currentempltable:{Emplid:"",Dimension:"",Itembuyergroupid:"",Name:"",Identnumber:"",Userid:"",Modifiedby:"",Modifieddatetime:new Date},columnsempltable:[{name:"Emplid",label:"รหัสพนักงาน",align:"left",field:"Emplid",sortable:!0},{name:"Dimension",label:"แผนก",align:"left",field:"Dimension",sortable:!0},{name:"Name",label:"ชื่อ",align:"left",field:"Name",sortable:!0},{name:"Identnumber",label:"รหัส ปชช.",align:"center",field:"Identnumber",sortable:!0},{name:"Userid",label:"ผู้ใช้ Login",align:"left",field:"Userid",sortable:!0},{name:"Modifiedby",label:"แก้ไข",align:"left",field:"Modifiedby",sortable:!0},{name:"Modifieddatetime",label:"แก้ไขล่าสุด",align:"left",field:"Modifieddatetime",format:function(e){return d["b"].formatDate(e,"YY/MM/DD HH:mm")},sortable:!0}],optionempltable:[],alluser:[],allempltable:[]}},created:function(){var e=this;this.LoadData(this.pagination),this.getdimensions().then((function(t){var n=t.data;e.alldimensions=n}))},methods:p(p(p({},Object(c["b"])("inventproduct",["getdimensions","getempltablespagination","createempltables","updateempltables"])),Object(c["b"])("auth",["getuserinid"])),{},{LoadData:function(e){var t=this;this.$q.loading.show(),this.getempltablespagination({page:e.Page,rowperpage:e.rowsPerPage,search:this.filter}).then((function(e){var n=e.data;return t.pagination.MaxPage=n.MaxPage,t.allempltable=n.Data,[].concat(o()(t.allempltable.map((function(e){return e.Userid}))),o()(t.allempltable.map((function(e){return e.Modifiedby}))))})).then((function(e){return t.getuserinid({data:e})})).then((function(e){e.status;var n=e.data;t.optionempltable=n,t.$q.loading.hide(),t.timer=void 0})).catch((function(e){t.$q.notify(e.message),t.$q.loading.hide(),t.timer=void 0}))},Createempltables:function(e){var t=this;this.$q.loading.show(),this.createempltables(e).then((function(e){e.status;var n=e.data;t.allempltable.unshift(n),t.selected=[],t.$q.notify("อัพเดทเรียบร้อย"),t.$q.loading.hide(),t.timer=void 0})).catch((function(e){t.$q.loading.hide(),t.timer=void 0,console.log(e.response),t.$q.notify({icon:"done",color:"red",message:e.response.data.message})}))},Updateempltables:function(e){var t=this;this.$q.loading.show(),this.updateempltables(e).then((function(e){e.status,e.data;t.$q.notify("อัพเดทเรียบร้อย"),t.$q.loading.hide(),t.timer=void 0})).catch((function(e){t.$q.loading.hide(),t.timer=void 0,console.log(e.response),t.$q.notify({icon:"done",color:"red",message:e.response.data.message})}))},filterFn:function(e,t,n){var i=this;setTimeout((function(){t((function(){""!==e&&i.getuserinid({query:{search:e},data:[]}).then((function(e){e.status;var t=e.data;i.alluser=t}))}))}),1500)},Search:function(){1===this.pagination.Page?this.LoadData(this.pagination):this.pagination.Page=1}}),beforeDestroy:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.$q.loading.hide())},watch:{"pagination.Page":function(e,t){this.LoadData(this.pagination)},"pagination.rowsPerPage":function(){1===this.pagination.Page?this.LoadData(this.pagination):this.pagination.Page=1},selected:function(e){e.length>0?(this.modeadd=!1,this.currentempltable=e[0],this.alluser=this.optionempltable):(this.modeadd=!0,this.currentempltable={Emplid:"",Dimension:"",Itembuyergroupid:"",Name:"",Identnumber:"",Userid:"",Modifiedby:"",Modifieddatetime:new Date})}}},b=u,f=n("2877"),g=n("9989"),h=n("f09f"),q=n("a370"),v=n("eb85"),y=n("1c1c"),w=n("66e5"),D=n("4074"),P=n("0170"),k=n("27f9"),x=n("ddd8"),_=n("4b7e"),$=n("9c40"),I=n("eaac"),O=n("05c0"),C=n("0016"),M=n("db86"),N=n("3b16"),Q=n("7f67"),U=n("eebe"),j=n.n(U),E=Object(f["a"])(b,i,a,!1,null,null,null);t["default"]=E.exports;j()(E,"components",{QPage:g["a"],QCard:h["a"],QCardSection:q["a"],QSeparator:v["a"],QList:y["a"],QItem:w["a"],QItemSection:D["a"],QItemLabel:P["a"],QInput:k["a"],QSelect:x["a"],QCardActions:_["a"],QBtn:$["a"],QTable:I["a"],QTooltip:O["a"],QIcon:C["a"],QTd:M["a"],QPagination:N["a"]}),j()(E,"directives",{ClosePopup:Q["a"]})}}]);